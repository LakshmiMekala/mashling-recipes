{
    "name": "grpc to grpc gateway",
    "type": "flogo:app",
    "version": "1.0.0",
    "description": "This is a simple grpc to grpc gateway server.",
    "properties": null,
    "triggers": [
        {
            "name": "grpc_sample_trigger",
            "id": "grpc_sample_trigger",
            "ref": "github.com/TIBCOSoftware/mashling/ext/flogo/trigger/grpc",
            "settings": {
                "port": 9096,
                "protoname": "petstore",
                "servicename": "PetStoreService"
            },
            "output": null,
            "handlers": [
                {
                    "settings": {
                        "autoIdReply": "false",
                        "methodName": "UserByName",
                        "useReplyHandler": "false"
                    },
                    "output": null,
                    "Action": null,
                    "actionId": "grpc_sample_trigger_userByNameDispatch",
                    "outputs": null
                },
                {
                    "settings": {
                        "autoIdReply": "false",
                        "methodName": "PetById",
                        "useReplyHandler": "false"
                    },
                    "output": null,
                    "Action": null,
                    "actionId": "grpc_sample_trigger_petByIdDispatch",
                    "outputs": null
                },
                {
                    "settings": {
                        "autoIdReply": "false",
                        "useReplyHandler": "false"
                    },
                    "output": null,
                    "Action": null,
                    "actionId": "grpc_sample_trigger_defDispatch",
                    "outputs": null
                }
            ],
            "outputs": null
        }
    ],
    "resources": null,
    "actions": [
        {
            "ref": "github.com/TIBCOSoftware/flogo-contrib/action/flow",
            "data": {
                "flow": {
                    "explicitReply": true,
                    "type": 1,
                    "attributes": [],
                    "rootTask": {
                        "id": 1,
                        "type": 1,
                        "tasks": [
                            {
                                "id": 2,
                                "name": "Invoke Mashling Core",
                                "description": "Execute Mashling Core",
                                "type": 1,
                                "activityType": "mashling-core",
                                "activityRef": "github.com/TIBCOSoftware/mashling/internal/pkg/model/v2/activity/core",
                                "attributes": [
                                    {
                                        "name": "mashlingPayload",
                                        "required": false,
                                        "value": null,
                                        "type": "object"
                                    },
                                    {
                                        "name": "identifier",
                                        "value": "grpc_sample_trigger_userByNameDispatch",
                                        "required": true,
                                        "type": "string"
                                    },
                                    {
                                        "name": "instance",
                                        "value": "grpc to grpc gateway",
                                        "required": true,
                                        "type": "string"
                                    },
                                    {
                                        "name": "routes",
                                        "value": [
                                            {
                                                "steps": [
                                                    {
                                                        "service": "PetStoreUsers",
                                                        "input": {
                                                            "grpcMthdParamtrs": "${payload.grpcData}"
                                                        }
                                                    }
                                                ],
                                                "responses": [
                                                    {
                                                        "error": false,
                                                        "output": {
                                                            "code": 200,
                                                            "data": "${PetStoreUsers.response.body}"
                                                        }
                                                    }
                                                ]
                                            }
                                        ],
                                        "required": true,
                                        "type": "array"
                                    },
                                    {
                                        "name": "services",
                                        "value": [
                                            {
                                                "name": "PetStoreUsers",
                                                "type": "grpc",
                                                "description": "Make calls to grpc end point",
                                                "settings": {
                                                    "hosturl": "localhost:9000"
                                                }
                                            },
                                            {
                                                "name": "PetStorePets",
                                                "type": "grpc",
                                                "description": "Make calls to grpc end point",
                                                "settings": {
                                                    "hosturl": "localhost:9001"
                                                }
                                            },
                                            {
                                                "name": "PetStorePetsDef",
                                                "type": "grpc",
                                                "description": "Make calls to grpc end point",
                                                "settings": {
                                                    "hosturl": "localhost:9002"
                                                }
                                            }
                                        ],
                                        "required": true,
                                        "type": "array"
                                    }
                                ],
                                "inputMappings": [
                                    {
                                        "type": 4,
                                        "value": {
                                            "grpcData": "{{$flow.grpcData}}",
                                            "params": "{{$flow.params}}"
                                        },
                                        "mapTo": "mashlingPayload"
                                    }
                                ]
                            }
                        ]
                    }
                }
            },
            "mappings": null,
            "id": "grpc_sample_trigger_userByNameDispatch",
            "metadata": null
        },
        {
            "ref": "github.com/TIBCOSoftware/flogo-contrib/action/flow",
            "data": {
                "flow": {
                    "explicitReply": true,
                    "type": 1,
                    "attributes": [],
                    "rootTask": {
                        "id": 1,
                        "type": 1,
                        "tasks": [
                            {
                                "id": 2,
                                "name": "Invoke Mashling Core",
                                "description": "Execute Mashling Core",
                                "type": 1,
                                "activityType": "mashling-core",
                                "activityRef": "github.com/TIBCOSoftware/mashling/internal/pkg/model/v2/activity/core",
                                "attributes": [
                                    {
                                        "name": "mashlingPayload",
                                        "required": false,
                                        "value": null,
                                        "type": "object"
                                    },
                                    {
                                        "name": "identifier",
                                        "value": "grpc_sample_trigger_petByIdDispatch",
                                        "required": true,
                                        "type": "string"
                                    },
                                    {
                                        "name": "instance",
                                        "value": "grpc to grpc gateway",
                                        "required": true,
                                        "type": "string"
                                    },
                                    {
                                        "name": "routes",
                                        "value": [
                                            {
                                                "steps": [
                                                    {
                                                        "service": "PetStorePets",
                                                        "input": {
                                                            "grpcMthdParamtrs": "${payload.grpcData}"
                                                        }
                                                    }
                                                ],
                                                "responses": [
                                                    {
                                                        "error": false,
                                                        "output": {
                                                            "code": 200,
                                                            "data": "${PetStorePets.response.body}"
                                                        }
                                                    }
                                                ]
                                            }
                                        ],
                                        "required": true,
                                        "type": "array"
                                    },
                                    {
                                        "name": "services",
                                        "value": [
                                            {
                                                "name": "PetStoreUsers",
                                                "type": "grpc",
                                                "description": "Make calls to grpc end point",
                                                "settings": {
                                                    "hosturl": "localhost:9000"
                                                }
                                            },
                                            {
                                                "name": "PetStorePets",
                                                "type": "grpc",
                                                "description": "Make calls to grpc end point",
                                                "settings": {
                                                    "hosturl": "localhost:9001"
                                                }
                                            },
                                            {
                                                "name": "PetStorePetsDef",
                                                "type": "grpc",
                                                "description": "Make calls to grpc end point",
                                                "settings": {
                                                    "hosturl": "localhost:9002"
                                                }
                                            }
                                        ],
                                        "required": true,
                                        "type": "array"
                                    }
                                ],
                                "inputMappings": [
                                    {
                                        "type": 4,
                                        "value": {
                                            "grpcData": "{{$flow.grpcData}}",
                                            "params": "{{$flow.params}}"
                                        },
                                        "mapTo": "mashlingPayload"
                                    }
                                ]
                            }
                        ]
                    }
                }
            },
            "mappings": null,
            "id": "grpc_sample_trigger_petByIdDispatch",
            "metadata": null
        },
        {
            "ref": "github.com/TIBCOSoftware/flogo-contrib/action/flow",
            "data": {
                "flow": {
                    "explicitReply": true,
                    "type": 1,
                    "attributes": [],
                    "rootTask": {
                        "id": 1,
                        "type": 1,
                        "tasks": [
                            {
                                "id": 2,
                                "name": "Invoke Mashling Core",
                                "description": "Execute Mashling Core",
                                "type": 1,
                                "activityType": "mashling-core",
                                "activityRef": "github.com/TIBCOSoftware/mashling/internal/pkg/model/v2/activity/core",
                                "attributes": [
                                    {
                                        "name": "mashlingPayload",
                                        "required": false,
                                        "value": null,
                                        "type": "object"
                                    },
                                    {
                                        "name": "identifier",
                                        "value": "grpc_sample_trigger_defDispatch",
                                        "required": true,
                                        "type": "string"
                                    },
                                    {
                                        "name": "instance",
                                        "value": "grpc to grpc gateway",
                                        "required": true,
                                        "type": "string"
                                    },
                                    {
                                        "name": "routes",
                                        "value": [
                                            {
                                                "steps": [
                                                    {
                                                        "service": "PetStorePetsDef",
                                                        "input": {
                                                            "grpcMthdParamtrs": "${payload.grpcData}"
                                                        }
                                                    }
                                                ],
                                                "responses": [
                                                    {
                                                        "error": false,
                                                        "output": {
                                                            "code": 200,
                                                            "data": "${PetStorePetsDef.response.body}"
                                                        }
                                                    }
                                                ]
                                            }
                                        ],
                                        "required": true,
                                        "type": "array"
                                    },
                                    {
                                        "name": "services",
                                        "value": [
                                            {
                                                "name": "PetStoreUsers",
                                                "type": "grpc",
                                                "description": "Make calls to grpc end point",
                                                "settings": {
                                                    "hosturl": "localhost:9000"
                                                }
                                            },
                                            {
                                                "name": "PetStorePets",
                                                "type": "grpc",
                                                "description": "Make calls to grpc end point",
                                                "settings": {
                                                    "hosturl": "localhost:9001"
                                                }
                                            },
                                            {
                                                "name": "PetStorePetsDef",
                                                "type": "grpc",
                                                "description": "Make calls to grpc end point",
                                                "settings": {
                                                    "hosturl": "localhost:9002"
                                                }
                                            }
                                        ],
                                        "required": true,
                                        "type": "array"
                                    }
                                ],
                                "inputMappings": [
                                    {
                                        "type": 4,
                                        "value": {
                                            "grpcData": "{{$flow.grpcData}}",
                                            "params": "{{$flow.params}}"
                                        },
                                        "mapTo": "mashlingPayload"
                                    }
                                ]
                            }
                        ]
                    }
                }
            },
            "mappings": null,
            "id": "grpc_sample_trigger_defDispatch",
            "metadata": null
        }
    ]
}